# Tech Spec Generator - Templates

> 完整模板集，供 `/tech-spec-gen` 生成規格文件時參考

---

## 1. 主規格文件模板 (tech-spec.md)

```markdown
# [專案名稱] 技術規格

> **版本**：v1.0 | **產生日期**：YYYY-MM-DD | **來源文件版本**：vX.X

## 目錄

1. [技術概覽](#1-技術概覽)
2. [系統架構](#2-系統架構)
3. [資料模型](#3-資料模型)
4. [API/介面定義](#4-api介面定義)
5. [狀態管理](#5-狀態管理)
6. [任務分解](#6-任務分解)
7. [驗收標準](#7-驗收標準)
8. [技術決策記錄](#8-技術決策記錄)

---

## 1. 技術概覽

### 1.1 技術棧確認

| 層級 | 技術選擇 | 版本 | 決策依據 |
|------|----------|------|----------|
| 語言 | | | |
| 框架 | | | |
| 資料庫 | | | |
| 測試框架 | | | |
| 部署環境 | | | |

### 1.2 專案結構

```
[專案根目錄]/
├── src/                    # 原始碼
│   ├── core/               # 核心邏輯
│   ├── domain/             # 領域層
│   ├── data/               # 資料層
│   ├── presentation/       # 呈現層
│   └── infrastructure/     # 基礎設施
├── tests/                  # 測試
├── docs/                   # 文件
└── config/                 # 配置
```

### 1.3 外部依賴

| 依賴 | 用途 | 版本約束 | 替代方案 |
|------|------|----------|----------|
| | | | |

---

## 2. 系統架構

### 2.1 高層架構圖

```
[架構圖 - 用 ASCII 或 Mermaid]
```

### 2.2 模組職責

| 模組 | 職責 | 依賴 | 對應設計文件章節 |
|------|------|------|------------------|
| | | | |

### 2.3 核心流程

[主要流程的序列圖或流程圖]

---

## 3. 資料模型

### 3.1 核心實體

```[語言]
// Entity 定義，包含欄位、類型、約束、驗證規則
```

### 3.2 資料關係

```
[ER 圖或關係說明]
```

### 3.3 常數與配置

```[語言]
// 從設計文件提取的數值常數
// 每個常數都標註來源章節
```

---

## 4. API/介面定義

### 4.1 公開 API

```[語言]
// 每個 API 的 signature、參數、回傳值、錯誤處理
// 包含使用範例
```

### 4.2 事件系統

| 事件名稱 | Payload | 觸發時機 | 訂閱者 |
|----------|---------|----------|--------|
| | | | |

---

## 5. 狀態管理

### 5.1 全局狀態

```[語言]
// 狀態結構、初始值、更新規則
```

### 5.2 狀態機定義

```
[狀態]─trigger─>[狀態]
```

---

## 6. 任務分解

### 6.1 任務總覽

| Task ID | 任務名稱 | 優先級 | 依賴 | 複雜度 | 狀態 |
|---------|----------|--------|------|--------|------|
| T001 | | P0/P1/P2 | | S/M/L/XL | pending |

### 6.2 Phase 分組

```
Phase 1: Foundation
├── T001: ...
└── T002: ...

Phase 2: Core
├── T003: ...
└── T004: ...
```

> 詳細任務規格請見 [tasks/](./tasks/) 目錄

---

## 7. 驗收標準

### 7.1 功能驗收

- [ ] [功能1]：[可測試的標準]
- [ ] [功能2]：[可測試的標準]

### 7.2 效能驗收

| 指標 | 目標 | 測試方法 |
|------|------|----------|
| | | |

### 7.3 品質驗收

- [ ] 測試覆蓋率 > X%
- [ ] 無 linter 警告
- [ ] 文件齊全

---

## 8. 技術決策記錄

### ADR-001: [決策標題]

**狀態**：已決定

**背景**：[為什麼需要這個決策]

**選項**：
1. [選項A] - 優缺點
2. [選項B] - 優缺點

**決定**：[選擇及原因]

**影響**：[帶來的影響]
```

---

## 2. 任務規格模板 (task-spec.md)

```markdown
# Task [ID]: [任務名稱]

> **優先級**：P0/P1/P2 | **複雜度**：S/M/L/XL | **依賴**：[依賴任務]

## 目標

[一句話描述這個任務要達成什麼]

## 背景

### 相關設計文件章節
- [章節名稱及摘要]

### 相關技術規格
- [tech-spec.md 章節連結]

## 實作規格

### 需要建立的檔案

| 檔案路徑 | 用途 |
|----------|------|
| | |

### 程式碼規格

```[語言]
// 需要實作的介面/類別/函數
// 包含完整的 signature 和說明
```

## 驗收標準

### 功能驗收

- [ ] [具體可測試的標準1]
- [ ] [具體可測試的標準2]

### 測試案例

```
Given: [前置條件]
When: [執行動作]
Then: [預期結果]
```

### 邊界條件

| 情境 | 預期行為 |
|------|----------|
| | |

## 實作指引

### 建議實作順序

1. [步驟1]
2. [步驟2]

### 注意事項

- [重要提醒]

## Worktree 設定

```bash
git worktree add ../[project]-[task-id] -b feature/[task-id]-[name]
```
```

---

## 3. ADR 模板 (Architecture Decision Record)

```markdown
# ADR-[編號]: [決策標題]

**狀態**：提議中 / 已決定 / 已取代 / 已廢棄

**日期**：YYYY-MM-DD

**決策者**：[誰做出這個決策]

## 背景

[描述促使這個決策的情境和問題]

## 決策驅動因素

- [驅動因素1]
- [驅動因素2]

## 考慮的選項

### 選項 A: [名稱]

**優點**：
- ...

**缺點**：
- ...

### 選項 B: [名稱]

**優點**：
- ...

**缺點**：
- ...

## 決定

選擇 [選項]，因為：

- [原因1]
- [原因2]

## 影響

### 正面影響
- ...

### 負面影響
- ...

### 需要的後續行動
- ...

## 相關

- [相關 ADR 連結]
- [相關設計文件連結]
```

---

## 4. API 設計模板

```markdown
# API Reference

## 概覽

| 端點 | 方法 | 用途 |
|------|------|------|
| `/api/v1/xxx` | GET | ... |

---

## 端點詳細

### GET /api/v1/[resource]

**描述**：[功能說明]

**認證**：需要 / 不需要

**請求參數**：

| 參數 | 類型 | 必填 | 說明 |
|------|------|------|------|
| | | | |

**回應格式**：

```json
{
  "status": "success",
  "data": { ... }
}
```

**錯誤代碼**：

| 代碼 | 說明 | 處理建議 |
|------|------|----------|
| 400 | Bad Request | 檢查參數 |
| 401 | Unauthorized | 重新認證 |
| 404 | Not Found | 確認資源存在 |

**使用範例**：

```bash
curl -X GET "https://api.example.com/api/v1/[resource]" \
  -H "Authorization: Bearer TOKEN"
```
```

---

## 5. 資料模型模板

```markdown
# Data Models

## Entity: [實體名稱]

### Schema

```typescript
interface [Entity] {
  id: string;           // 唯一識別碼
  [field]: [type];      // [說明]
  createdAt: Date;      // 建立時間
  updatedAt: Date;      // 更新時間
}
```

### 約束條件

- `[field]`: [約束說明]

### 關係

```
[Entity] --< [RelatedEntity]  // 一對多
[Entity] >--< [RelatedEntity] // 多對多
```

### 索引

| 欄位 | 類型 | 用途 |
|------|------|------|
| id | Primary | 主鍵 |
| [field] | Index | 查詢優化 |

### 驗證規則

| 欄位 | 規則 |
|------|------|
| | |
```

---

## 6. Worktree Context 模板

```markdown
# Task Context for AI Agent

## 任務資訊

- **Task ID**: [ID]
- **任務名稱**: [名稱]
- **分支**: feature/[task-id]-[name]

## 你需要做什麼

[清楚描述任務目標]

## 已完成的前置任務

- [x] T00X: [任務名稱] - [關鍵產出]

## 相關檔案

| 檔案 | 用途 | 備註 |
|------|------|------|
| | | |

## 驗收標準

- [ ] [標準1]
- [ ] [標準2]

## 完成後

1. 執行測試確認通過
2. 提交 commit 並描述變更
3. 準備 merge 回主分支
```
